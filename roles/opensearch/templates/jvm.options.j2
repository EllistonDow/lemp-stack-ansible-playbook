## JVM configuration

################################################################
## IMPORTANT: JVM heap size
################################################################
## 设置适当的堆内存大小
-Xms{{ opensearch_heap_size }}
-Xmx{{ opensearch_heap_size }}

################################################################
## Expert settings
################################################################
## GC Configuration
-XX:+UseG1GC
-XX:G1ReservePercent=25
-XX:InitiatingHeapOccupancyPercent=30

## JVM temporary directory
-Djava.io.tmpdir=${OPENSEARCH_TMPDIR}

## heap dumps
-XX:+HeapDumpOnOutOfMemoryError
-XX:HeapDumpPath=/var/lib/opensearch

## JVM fatal error logs
-XX:ErrorFile=/var/log/opensearch/hs_err_pid%p.log

## Network settings
-Djava.net.preferIPv4Stack=true

## Java 17兼容性
-Djava.security.manager=allow

## GC优化
-XX:+ExplicitGCInvokesConcurrent
-XX:+AlwaysPreTouch
-XX:+ParallelRefProcEnabled

## 直接内存限制 - 设置为堆大小的一半
-XX:MaxDirectMemorySize={{ (opensearch_heap_size|replace('g','')|int / 2)|int }}g 